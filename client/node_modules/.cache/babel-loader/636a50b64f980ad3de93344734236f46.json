{"ast":null,"code":"import _classCallCheck from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import Card from'./Card';import Pagination from'../Components/Pagination';import Spinner from'react-spinner-material';var Content=/*#__PURE__*/function(_React$Component){_inherits(Content,_React$Component);function Content(props){var _this;_classCallCheck(this,Content);_this=_possibleConstructorReturn(this,_getPrototypeOf(Content).call(this,props));_this.changeCurrentPage=function(numPage){var chooseID=_this.state.chooseID;_this.setState({loading:true});axios.get(\"/api/producttype/\".concat(chooseID,\"/\").concat(numPage)).then(function(res){_this.setState({productslist:res.data,currentPage:numPage,loading:false});}).catch(function(error){return console.log(error);});};_this.state={productslist:[],totalproduct:0,chooseID:'',currentPage:1,loading:true};return _this;}_createClass(Content,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;console.log('content rendering');var chooseID=this.props.chooseID;axios.get(\"/api/producttype/\".concat(chooseID,\"/1\")).then(function(res){axios.get(\"/api/totalproduct/\".concat(chooseID)).then(function(res1){_this2.setState({totalproduct:res1.data.total_product,productslist:res.data,chooseID:chooseID,loading:false});}).catch(function(error){return console.log(error);});}).catch(function(error){return console.log(error);});}},{key:\"componentWillUpdate\",value:function componentWillUpdate(nextProps,nextState){var _this3=this;if(nextProps.chooseID!=nextState.chooseID&&!nextState.loading){console.log('will update');var loading=this.state.loading;if(!loading){this.setState({loading:true});}var chooseID=nextProps.chooseID;axios.get(\"/api/producttype/\".concat(chooseID,\"/1\")).then(function(res){axios.get(\"/api/totalproduct/\".concat(chooseID)).then(function(res1){_this3.setState({totalproduct:res1.data.total_product,productslist:res.data,chooseID:chooseID,currentPage:1,loading:false});}).catch(function(error){return console.log(error);});}).catch(function(error){return console.log(error);});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var productslist=this.state.productslist;if(productslist!=null&&productslist.length>0){window.scrollTo({top:0,behavior:'smooth'});}}},{key:\"render\",value:function render(){var cards=this.state.productslist.map(function(e){if(e.TEN_SAN_PHAM[0]==='\\\"'){e.TEN_SAN_PHAM=e.TEN_SAN_PHAM.substring(1,e.TEN_SAN_PHAM.length-1);e.THOI_DIEM_DANG=e.THOI_DIEM_DANG.substring(1,e.THOI_DIEM_DANG.length-1);}return React.createElement(Card,{key:e._id,product:e});});var totalproduct=this.state.totalproduct;var temp=Math.floor(totalproduct/6);var pageCount=totalproduct%6!==0?temp+1:temp;return this.state.loading?React.createElement(\"div\",{className:\"loading\"},React.createElement(Spinner,{size:120,spinnerColor:\"#333\",spinnerWidth:3,visible:this.state.loading})):React.createElement(\"div\",null,React.createElement(\"div\",{className:\"content-wrapper\"},cards),React.createElement(\"div\",{id:\"pagination-wrapper\"},React.createElement(Pagination,{totalpage:pageCount,changeCurrentPage:this.changeCurrentPage,currentPage:this.state.currentPage})));}}]);return Content;}(React.Component);export default Content;","map":{"version":3,"sources":["E:/WorkPlace-React/MERNAPP/client/src/Home/Content.js"],"names":["React","axios","Card","Pagination","Spinner","Content","props","changeCurrentPage","numPage","chooseID","state","setState","loading","get","then","res","productslist","data","currentPage","catch","error","console","log","totalproduct","res1","total_product","nextProps","nextState","length","window","scrollTo","top","behavior","cards","map","e","TEN_SAN_PHAM","substring","THOI_DIEM_DANG","_id","temp","Math","floor","pageCount","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport Card from './Card';\r\nimport Pagination from '../Components/Pagination';\r\nimport Spinner from 'react-spinner-material';\r\nclass Content extends React.Component{\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            productslist : [],\r\n            totalproduct: 0,\r\n            chooseID: '',\r\n            currentPage: 1,\r\n            loading: true\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        console.log('content rendering')\r\n        let {chooseID} = this.props;\r\n        axios.get(`/api/producttype/${chooseID}/1`)\r\n            .then(res => {\r\n                axios.get(`/api/totalproduct/${chooseID}`)\r\n                    .then(res1 => {\r\n                        this.setState({\r\n                            totalproduct: res1.data.total_product,\r\n                            productslist : res.data,\r\n                            chooseID: chooseID,\r\n                            loading: false\r\n                        })\r\n                    })\r\n                    .catch(error => console.log(error));\r\n            })\r\n            .catch(error => console.log(error));\r\n    }\r\n    \r\n    componentWillUpdate(nextProps, nextState){\r\n        if(nextProps.chooseID != nextState.chooseID && !nextState.loading){\r\n            console.log('will update')\r\n            let {loading} = this.state;\r\n            if(!loading){\r\n                this.setState({loading: true})\r\n            }\r\n            let {chooseID} = nextProps;\r\n            axios.get(`/api/producttype/${chooseID}/1`)\r\n            .then(res => {\r\n                axios.get(`/api/totalproduct/${chooseID}`)\r\n                    .then(res1 => {\r\n                        this.setState({\r\n                            totalproduct: res1.data.total_product,\r\n                            productslist : res.data,\r\n                            chooseID: chooseID,\r\n                            currentPage: 1,\r\n                            loading: false\r\n                        })\r\n                    })\r\n                    .catch(error => console.log(error));\r\n            })\r\n            .catch(error => console.log(error));\r\n        }\r\n    }\r\n\r\n    changeCurrentPage = numPage => {\r\n        let {chooseID} = this.state;\r\n        this.setState({loading: true})\r\n        axios.get(`/api/producttype/${chooseID}/${numPage}`)\r\n            .then(res => {\r\n                this.setState({\r\n                    productslist : res.data,\r\n                    currentPage: numPage,\r\n                    loading: false\r\n                })\r\n            })\r\n            .catch(error => console.log(error));\r\n    };\r\n\r\n    componentDidUpdate(){\r\n        let {productslist} = this.state;\r\n        if(productslist != null && productslist.length > 0){\r\n            \r\n            window.scrollTo({\r\n                top: 0,\r\n                behavior:'smooth'\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let cards = this.state.productslist.map(e => {\r\n            if(e.TEN_SAN_PHAM[0] === '\\\"'){\r\n                e.TEN_SAN_PHAM = e.TEN_SAN_PHAM.substring(1,e.TEN_SAN_PHAM.length - 1);\r\n                e.THOI_DIEM_DANG = e.THOI_DIEM_DANG.substring(1,e.THOI_DIEM_DANG.length - 1);\r\n            }\r\n\r\n            return(\r\n                <Card key={e._id} product={e}/>\r\n            )\r\n        })\r\n\r\n        let {totalproduct} = this.state;\r\n        let temp = Math.floor(totalproduct / 6);\r\n        let pageCount = totalproduct % 6 !== 0 ? (temp + 1) : temp;\r\n\r\n        return (\r\n            \r\n                this.state.loading ? \r\n                <div className=\"loading\"> \r\n                    <Spinner size={120} spinnerColor={\"#333\"} spinnerWidth={3} visible={this.state.loading} />\r\n                </div> \r\n                : \r\n                <div>\r\n                    <div className={\"content-wrapper\" }>\r\n                        {cards}\r\n                    </div>\r\n\r\n                    <div id=\"pagination-wrapper\">\r\n                        <Pagination\r\n                            totalpage={pageCount}\r\n                            changeCurrentPage={this.changeCurrentPage}\r\n                            currentPage={this.state.currentPage}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default Content;"]},"metadata":{},"sourceType":"module"}