{"ast":null,"code":"import _classCallCheck from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import'./ProductView.css';// import '../Home/Home.css';\nimport Card from'../Home/Card';import{Link}from'react-router-dom';var ProductView=/*#__PURE__*/function(_React$Component){_inherits(ProductView,_React$Component);function ProductView(props){var _this;_classCallCheck(this,ProductView);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProductView).call(this,props));_this.doChange=function(e){_this.setState({active:e});};_this.state={product:[],productType:'',relatedProduct:[],active:1};return _this;}_createClass(ProductView,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;var id=this.props.match.params.id;axios.get('/api/product/'+id).then(function(res){console.log(res.data);_this2.setState({product:res.data,productType:res.data[0].MA_LOAI_HANG});}).then(function(res){axios.get(\"/api/product-related/\".concat(_this2.state.productType,\"/\").concat(id)).then(function(res){_this2.setState({relatedProduct:res.data});});}).catch(function(error){return console.log(error);});}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newprops){var _this3=this;var id=newprops.match.params.id;axios.get('/api/product/'+id).then(function(res){_this3.setState({product:res.data,productType:res.data[0].MA_LOAI_HANG,active:1});}).then(function(res){axios.get(\"/api/product-related/\".concat(_this3.state.productType,\"/\").concat(id)).then(function(res){_this3.setState({relatedProduct:res.data});});}).catch(function(error){return console.log(error);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){window.scrollTo({top:0,behavior:'smooth'});}},{key:\"render\",value:function render(){var _this4=this;var cards=this.state.relatedProduct.map(function(e){return React.createElement(Card,{key:e._id,product:e});});var eleproduct=this.state.product.map(function(p){if(p.TEN_SAN_PHAM[0]==='\\\"'){p.TEN_SAN_PHAM=p.TEN_SAN_PHAM.substring(1,p.TEN_SAN_PHAM.length-1);p.THOI_DIEM_DANG=p.THOI_DIEM_DANG.substring(1,p.THOI_DIEM_DANG.length-1);}var images=[];images.push({stt:1,link:p.LINK_ANH});images.push({stt:2,link:p.LINK_ANH_BS1});images.push({stt:3,link:p.LINK_ANH_BS2});images.push({stt:4,link:p.LINK_ANH_BS3});return React.createElement(\"div\",{key:p._id,className:\"row1 product-detail\"},React.createElement(\"div\",{className:\"product-wrapper\"},React.createElement(ViewImage,{images:images,active:_this4.state.active,doChange:_this4.doChange}),React.createElement(\"div\",{className:\"product-info\"},React.createElement(\"div\",{className:\"product-title\"},React.createElement(\"h1\",null,p.TEN_SAN_PHAM)),React.createElement(\"div\",{className:\"product-body\"},React.createElement(\"p\",null,\"Ng\\xE0y \\u0111\\u0103ng: \",p.THOI_DIEM_DANG),React.createElement(\"p\",null,\"M\\xF4 t\\u1EA3: \",p.MO_TA),React.createElement(\"p\",{className:\"productdetail-price\"},\"\\u0111 \",p.GIA_HIEN_TAI),React.createElement(\"p\",null,\"Th\\xF4ng tin kh\\xE1c: ***\"))),React.createElement(\"div\",{className:\"related-title\"},React.createElement(\"h2\",null,\"S\\u1EA3n ph\\u1EA9m t\\u01B0\\u01A1ng t\\u1EF1\"))),React.createElement(\"div\",{className:\"product-related\"},cards));});return React.createElement(\"div\",null,eleproduct);}}]);return ProductView;}(React.Component);var ViewImage=/*#__PURE__*/function(_React$Component2){_inherits(ViewImage,_React$Component2);function ViewImage(props){var _this5;_classCallCheck(this,ViewImage);_this5=_possibleConstructorReturn(this,_getPrototypeOf(ViewImage).call(this,props));_this5.goLeft=function(){console.log('left');var active=_this5.props.active;if(active===1){active=4;}else{active--;}_this5.props.doChange(active);};_this5.goRight=function(){console.log('right');var active=_this5.props.active;if(active===4){active=1;}else{active++;}_this5.props.doChange(active);};return _this5;}_createClass(ViewImage,[{key:\"render\",value:function render(){var _this6=this;var elementImage=this.props.images.map(function(p){return React.createElement(\"div\",{key:p.stt,className:\"slide-wrapper\"},React.createElement(\"img\",{className:p.stt===_this6.props.active?\"slide active\":\"slide\",src:p.link}));});return React.createElement(\"div\",{className:\"image-detail\"},elementImage,React.createElement(\"a\",{className:\"bt goLeft\",onClick:this.goLeft},React.createElement(\"img\",{className:\"icon pre\",src:\"https://cdn.iconscout.com/icon/premium/png-256-thumb/previous-69-661269.png\"})),React.createElement(\"a\",{className:\"bt goRight\",onClick:this.goRight},React.createElement(\"img\",{className:\"icon next\",src:\"https://png.pngtree.com/svg/20170523/d62342689e.png\"})));}}]);return ViewImage;}(React.Component);export default ProductView;","map":{"version":3,"sources":["E:/WorkPlace-React/MERNAPP/client/src/DetailProduct/ProductView.js"],"names":["React","axios","Card","Link","ProductView","props","doChange","e","setState","active","state","product","productType","relatedProduct","id","match","params","get","then","res","console","log","data","MA_LOAI_HANG","catch","error","newprops","window","scrollTo","top","behavior","cards","map","_id","eleproduct","p","TEN_SAN_PHAM","substring","length","THOI_DIEM_DANG","images","push","stt","link","LINK_ANH","LINK_ANH_BS1","LINK_ANH_BS2","LINK_ANH_BS3","MO_TA","GIA_HIEN_TAI","Component","ViewImage","goLeft","goRight","elementImage"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport './ProductView.css';\r\n// import '../Home/Home.css';\r\nimport Card from '../Home/Card';\r\nimport { Link } from 'react-router-dom';\r\nclass ProductView extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            product: [],\r\n            productType: '',\r\n            relatedProduct: [],\r\n            active: 1\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        const id = this.props.match.params.id;\r\n        axios.get('/api/product/'+id)\r\n            .then(res => {\r\n                console.log(res.data)\r\n                this.setState({\r\n                    product: res.data,\r\n                    productType: res.data[0].MA_LOAI_HANG\r\n                })\r\n            }).then(res => {\r\n                axios.get(`/api/product-related/${this.state.productType}/${id}`)\r\n                    .then(res => {\r\n                        this.setState({\r\n                            relatedProduct: res.data\r\n                        })\r\n                    })\r\n            })\r\n            .catch(error => console.log(error));\r\n    }\r\n\r\n    componentWillReceiveProps(newprops){\r\n        const id = newprops.match.params.id;\r\n        axios.get('/api/product/'+id)\r\n            .then(res => {\r\n                \r\n                this.setState({\r\n                    product: res.data,\r\n                    productType: res.data[0].MA_LOAI_HANG,\r\n                    active: 1\r\n                })\r\n            }).then(res => {\r\n                axios.get(`/api/product-related/${this.state.productType}/${id}`)\r\n                    .then(res => {\r\n                        this.setState({\r\n                            relatedProduct: res.data\r\n                        })\r\n                    })\r\n            })\r\n            .catch(error => console.log(error));\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: 'smooth'\r\n        })\r\n    }\r\n\r\n    doChange = (e) => {\r\n        this.setState({\r\n            active: e\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let cards = this.state.relatedProduct.map(e => {\r\n            return(\r\n                <Card key={e._id} product={e}/>\r\n            )\r\n        })\r\n\r\n        let eleproduct = this.state.product.map(p => {\r\n            if(p.TEN_SAN_PHAM[0] === '\\\"'){\r\n                p.TEN_SAN_PHAM = p.TEN_SAN_PHAM.substring(1, p.TEN_SAN_PHAM.length - 1);\r\n                p.THOI_DIEM_DANG = p.THOI_DIEM_DANG.substring(1, p.THOI_DIEM_DANG.length - 1);\r\n            }\r\n\r\n            let images = [];\r\n            images.push({stt: 1, link: p.LINK_ANH});\r\n            images.push({stt: 2, link: p.LINK_ANH_BS1});\r\n            images.push({stt: 3, link: p.LINK_ANH_BS2});\r\n            images.push({stt: 4, link: p.LINK_ANH_BS3});\r\n\r\n            return(\r\n                <div key={p._id} className=\"row1 product-detail\">\r\n                    <div className=\"product-wrapper\">\r\n                        <ViewImage images={images} active={this.state.active} doChange={this.doChange}/>\r\n                        <div className=\"product-info\">\r\n                            <div className=\"product-title\">\r\n                                <h1>{p.TEN_SAN_PHAM}</h1>\r\n                            </div>\r\n                            <div className=\"product-body\">\r\n                                <p>Ngày đăng: {p.THOI_DIEM_DANG}</p>\r\n                                <p>Mô tả: {p.MO_TA}</p>\r\n                                <p className=\"productdetail-price\">đ {p.GIA_HIEN_TAI}</p>\r\n                                <p>Thông tin khác: ***</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"related-title\">\r\n                            <h2>Sản phẩm tương tự</h2>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"product-related\">\r\n                        {cards}\r\n                    </div>\r\n                    \r\n                    \r\n                </div>\r\n            )\r\n        })\r\n\r\n        return (\r\n            <div>\r\n                {eleproduct}\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nclass ViewImage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    goLeft = () => {\r\n        console.log('left')\r\n        let active = this.props.active;\r\n        if(active === 1){\r\n            active = 4;\r\n        }else{\r\n            active--;\r\n        }\r\n        this.props.doChange(active);\r\n    }\r\n\r\n    goRight = () => {\r\n        console.log('right')\r\n        let active = this.props.active;\r\n        if(active === 4){\r\n            active = 1;\r\n        }else{\r\n            active++;\r\n        }\r\n        this.props.doChange(active);\r\n        \r\n    }\r\n    \r\n    render() {\r\n        let elementImage = this.props.images.map(p => {\r\n            return(\r\n                <div key={p.stt} className=\"slide-wrapper\"><img className={p.stt === this.props.active ? \"slide active\" : \"slide\"} src={p.link}></img></div>\r\n            )\r\n        })\r\n        return (\r\n            <div className=\"image-detail\">\r\n                {elementImage}\r\n                \r\n                <a className=\"bt goLeft\" onClick={this.goLeft}><img className=\"icon pre\" src=\"https://cdn.iconscout.com/icon/premium/png-256-thumb/previous-69-661269.png\"></img></a>\r\n                <a className=\"bt goRight\" onClick={this.goRight}><img className=\"icon next\" src=\"https://png.pngtree.com/svg/20170523/d62342689e.png\"></img></a>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProductView;"]},"metadata":{},"sourceType":"module"}