{"ast":null,"code":"import _classCallCheck from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\WorkPlace-React\\\\MERNAPP\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from'react';import axios from'axios';import'./ProductView.css';// import '../Home/Home.css';\nimport Card from'../Home/Card';import{Link}from'react-router-dom';import Spinner from'react-spinner-material';var ProductView=/*#__PURE__*/function(_React$Component){_inherits(ProductView,_React$Component);function ProductView(props){var _this;_classCallCheck(this,ProductView);_this=_possibleConstructorReturn(this,_getPrototypeOf(ProductView).call(this,props));_this.doChange=function(e){_this.setState({active:e});};_this.state={product:[],relatedProduct:[],active:1,loading:true};return _this;}_createClass(ProductView,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;var _this$props$match$par=this.props.match.params,id=_this$props$match$par.id,type=_this$props$match$par.type;axios.get('/api/product/'+id).then(function(res){axios.get(\"/api/product-related/\".concat(type,\"/\").concat(id)).then(function(res1){console.log(res1.data);_this2.setState({relatedProduct:res1.data,product:res.data,loading:false});});}).catch(function(error){return console.log(error);});}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newprops){var _this3=this;this.setState({loading:true});console.log('will');var _newprops$match$param=newprops.match.params,id=_newprops$match$param.id,type=_newprops$match$param.type;axios.get('/api/product/'+id).then(function(res){axios.get(\"/api/product-related/\".concat(type,\"/\").concat(id)).then(function(res1){_this3.setState({relatedProduct:res1.data,product:res.data,active:1,loading:false});});}).catch(function(error){return console.log(error);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){window.scrollTo({top:0,behavior:'smooth'});}},{key:\"render\",value:function render(){var _this4=this;var cards=this.state.relatedProduct.map(function(e){return React.createElement(Card,{key:e._id,product:e});});var product=this.state.product;var eleproduct=function eleproduct(p){if(p.TEN_SAN_PHAM[0]==='\\\"'){p.TEN_SAN_PHAM=p.TEN_SAN_PHAM.substring(1,p.TEN_SAN_PHAM.length-1);p.THOI_DIEM_DANG=p.THOI_DIEM_DANG.substring(1,p.THOI_DIEM_DANG.length-1);}var images=[];images.push({stt:1,link:p.LINK_ANH});images.push({stt:2,link:p.LINK_ANH_BS1});images.push({stt:3,link:p.LINK_ANH_BS2});images.push({stt:4,link:p.LINK_ANH_BS3});return React.createElement(\"div\",{key:p._id,className:\"row1 product-detail\"},React.createElement(\"div\",{className:\"product-wrapper\"},React.createElement(ViewImage,{images:images,active:_this4.state.active,doChange:_this4.doChange}),React.createElement(\"div\",{className:\"product-info ml-2\"},React.createElement(\"div\",{className:\"product-title\"},React.createElement(\"h1\",null,p.TEN_SAN_PHAM)),React.createElement(\"div\",{className:\"product-body\"},React.createElement(\"p\",null,\"Ng\\xE0y \\u0111\\u0103ng: \",p.THOI_DIEM_DANG),React.createElement(\"p\",null,\"M\\xF4 t\\u1EA3: \",p.MO_TA),React.createElement(\"p\",{className:\"productdetail-price\"},\"\\u0111 \",p.GIA_HIEN_TAI),React.createElement(\"p\",null,\"Th\\xF4ng tin kh\\xE1c: ***\"))),React.createElement(\"div\",{className:\"related-title\"},React.createElement(\"h2\",null,\"S\\u1EA3n ph\\u1EA9m t\\u01B0\\u01A1ng t\\u1EF1\"))),React.createElement(\"div\",{className:\"product-related\"},cards));};return this.state.loading?React.createElement(\"div\",{className:\"loading loaddetail\"},React.createElement(Spinner,{size:120,spinnerColor:\"#333\",spinnerWidth:2,visible:this.state.loading})):React.createElement(\"div\",null,eleproduct(product));}}]);return ProductView;}(React.Component);var ViewImage=/*#__PURE__*/function(_React$Component2){_inherits(ViewImage,_React$Component2);function ViewImage(props){var _this5;_classCallCheck(this,ViewImage);_this5=_possibleConstructorReturn(this,_getPrototypeOf(ViewImage).call(this,props));_this5.goLeft=function(){console.log('left');var active=_this5.props.active;if(active===1){active=4;}else{active--;}_this5.props.doChange(active);};_this5.goRight=function(){console.log('right');var active=_this5.props.active;if(active===4){active=1;}else{active++;}_this5.props.doChange(active);};return _this5;}_createClass(ViewImage,[{key:\"render\",value:function render(){var _this6=this;var elementImage=this.props.images.map(function(p){return React.createElement(\"div\",{key:p.stt,className:\"slide-wrapper\"},React.createElement(\"img\",{className:p.stt===_this6.props.active?\"slide active\":\"slide\",src:p.link}));});return React.createElement(\"div\",{className:\"image-detail border rounded\"},elementImage,React.createElement(\"a\",{className:\"bt goLeft\",onClick:this.goLeft},React.createElement(\"img\",{className:\"icon pre rounded-circle\",src:\"https://cdn.iconscout.com/icon/premium/png-256-thumb/previous-69-661269.png\"})),React.createElement(\"a\",{className:\"bt goRight\",onClick:this.goRight},React.createElement(\"img\",{className:\"icon next rounded-circle\",src:\"https://png.pngtree.com/svg/20170523/d62342689e.png\"})));}}]);return ViewImage;}(React.Component);export default ProductView;","map":{"version":3,"sources":["E:/WorkPlace-React/MERNAPP/client/src/DetailProduct/ProductView.js"],"names":["React","axios","Card","Link","Spinner","ProductView","props","doChange","e","setState","active","state","product","relatedProduct","loading","match","params","id","type","get","then","res","res1","console","log","data","catch","error","newprops","window","scrollTo","top","behavior","cards","map","_id","eleproduct","p","TEN_SAN_PHAM","substring","length","THOI_DIEM_DANG","images","push","stt","link","LINK_ANH","LINK_ANH_BS1","LINK_ANH_BS2","LINK_ANH_BS3","MO_TA","GIA_HIEN_TAI","Component","ViewImage","goLeft","goRight","elementImage"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport './ProductView.css';\r\n// import '../Home/Home.css';\r\nimport Card from '../Home/Card';\r\nimport { Link } from 'react-router-dom';\r\nimport Spinner from 'react-spinner-material';\r\nclass ProductView extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            product: [],\r\n            relatedProduct: [],\r\n            active: 1,\r\n            loading: true\r\n        }\r\n    }\r\n\r\n    componentWillMount(){\r\n        const {id, type} = this.props.match.params;\r\n        axios.get('/api/product/'+id)\r\n            .then(res => {\r\n                axios.get(`/api/product-related/${type}/${id}`)\r\n                    .then(res1 => {\r\n                        console.log(res1.data)\r\n                        this.setState({\r\n                            relatedProduct: res1.data,\r\n                            product: res.data,\r\n                            loading: false\r\n                        })\r\n                    })\r\n            })\r\n            .catch(error => console.log(error));\r\n    }\r\n\r\n    componentWillReceiveProps(newprops){\r\n        this.setState({loading: true})\r\n        console.log('will')\r\n        const {id,type} = newprops.match.params;\r\n        axios.get('/api/product/'+id)\r\n            .then(res => {\r\n                axios.get(`/api/product-related/${type}/${id}`)\r\n                    .then(res1 => {\r\n                        this.setState({\r\n                            relatedProduct: res1.data,\r\n                            product: res.data,\r\n                            active: 1,\r\n                            loading: false\r\n                        })\r\n                    })\r\n            })\r\n            .catch(error => console.log(error));\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        window.scrollTo({\r\n            top: 0,\r\n            behavior: 'smooth'\r\n        })\r\n    }\r\n\r\n    doChange = (e) => {\r\n        this.setState({\r\n            active: e\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let cards = this.state.relatedProduct.map(e => {\r\n            return(\r\n                <Card key={e._id} product={e}/>\r\n            )\r\n        })\r\n        let {product} = this.state;\r\n        let eleproduct = (p) => {\r\n            if(p.TEN_SAN_PHAM[0] === '\\\"'){\r\n                p.TEN_SAN_PHAM = p.TEN_SAN_PHAM.substring(1, p.TEN_SAN_PHAM.length - 1);\r\n                p.THOI_DIEM_DANG = p.THOI_DIEM_DANG.substring(1, p.THOI_DIEM_DANG.length - 1);\r\n            }\r\n\r\n            let images = [];\r\n            images.push({stt: 1, link: p.LINK_ANH});\r\n            images.push({stt: 2, link: p.LINK_ANH_BS1});\r\n            images.push({stt: 3, link: p.LINK_ANH_BS2});\r\n            images.push({stt: 4, link: p.LINK_ANH_BS3});\r\n\r\n            return(\r\n                <div key={p._id} className=\"row1 product-detail\">\r\n                    <div className=\"product-wrapper\">\r\n                        <ViewImage images={images} active={this.state.active} doChange={this.doChange}/>\r\n                        <div className=\"product-info ml-2\">\r\n                            <div className=\"product-title\">\r\n                                <h1>{p.TEN_SAN_PHAM}</h1>\r\n                            </div>\r\n                            <div className=\"product-body\">\r\n                                <p>Ngày đăng: {p.THOI_DIEM_DANG}</p>\r\n                                <p>Mô tả: {p.MO_TA}</p>\r\n                                <p className=\"productdetail-price\">đ {p.GIA_HIEN_TAI}</p>\r\n                                <p>Thông tin khác: ***</p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"related-title\">\r\n                            <h2>Sản phẩm tương tự</h2>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"product-related\">\r\n                        {cards}\r\n                    </div>\r\n                    \r\n                    \r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            this.state.loading ? \r\n            <div className=\"loading loaddetail\"> \r\n                    <Spinner size={120} spinnerColor={\"#333\"} spinnerWidth={2} visible={this.state.loading} />\r\n                </div>\r\n            :\r\n            <div>\r\n                {eleproduct(product)}\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nclass ViewImage extends React.Component{\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    goLeft = () => {\r\n        console.log('left')\r\n        let active = this.props.active;\r\n        if(active === 1){\r\n            active = 4;\r\n        }else{\r\n            active--;\r\n        }\r\n        this.props.doChange(active);\r\n    }\r\n\r\n    goRight = () => {\r\n        console.log('right')\r\n        let active = this.props.active;\r\n        if(active === 4){\r\n            active = 1;\r\n        }else{\r\n            active++;\r\n        }\r\n        this.props.doChange(active);\r\n        \r\n    }\r\n    \r\n    render() {\r\n        let elementImage = this.props.images.map(p => {\r\n            return(\r\n                <div key={p.stt} className=\"slide-wrapper\"><img className={p.stt === this.props.active ? \"slide active\" : \"slide\"} src={p.link}></img></div>\r\n            )\r\n        })\r\n        return (\r\n            <div className=\"image-detail border rounded\">\r\n                {elementImage}\r\n                \r\n                <a className=\"bt goLeft\" onClick={this.goLeft}><img className=\"icon pre rounded-circle\" src=\"https://cdn.iconscout.com/icon/premium/png-256-thumb/previous-69-661269.png\"></img></a>\r\n                <a className=\"bt goRight\" onClick={this.goRight}><img className=\"icon next rounded-circle\" src=\"https://png.pngtree.com/svg/20170523/d62342689e.png\"></img></a>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProductView;"]},"metadata":{},"sourceType":"module"}